(window.webpackJsonpLogan=window.webpackJsonpLogan||[]).push([[4],[,,,,,,,,,function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return g}));var r,i=n(1),o=n(0),a=n(12),s=n(3),u=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},c=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},l=n(17),f=n(13),p=[],h=!1;function d(){return u(this,void 0,void 0,(function(){var t,e,u,g,y,v,b;return c(this,(function(c){switch(c.label){case 0:if(!(p.length>0)||h)return[3,10];h=!0,t=p.shift(),c.label=1;case 1:if(c.trys.push([1,7,8,9]),!s.a.canSave())throw new Error(i.b.EXCEED_TRY_TIMES);if(!a.b.idbIsSupported())throw new Error(i.b.DB_NOT_SUPPORT);return r||(r=new a.b(o.a.get("dbName"))),e=function(t){var e={t:t.logType,c:""+encodeURIComponent(t.content),d:""+Date.now()};return JSON.stringify(e)}(t),t.encryptVersion!==i.a.PLAIN?[3,3]:(v={l:(w=e,l.parse(w).toString(f))},[4,r.addLog(JSON.stringify(v))]);case 2:return c.sent(),[3,6];case 3:return t.encryptVersion!==i.a.RSA?[3,6]:(u=o.a.get("publicKey"),[4,Promise.all([n.e(5),n.e(1)]).then(n.bind(null,22))]);case 4:return g=c.sent(),y=g.encryptByRSA(e,""+u),v={l:y.cipherText,iv:y.iv,k:y.secretKey,v:i.a.RSA},[4,r.addLog(JSON.stringify(v))];case 5:c.sent(),c.label=6;case 6:return o.a.get("succHandler")({content:t.content,logType:t.logType,encrypted:t.encryptVersion===i.a.RSA}),[3,9];case 7:return b=c.sent(),s.a.errorTrigger(),o.a.get("errorHandler")(b),[3,9];case 8:return h=!1,d(),[7];case 9:return[3,0];case 10:return[2]}var w}))}))}function g(t){p.push(t),d()}},,function(t,e,n){var r;t.exports=(r=r||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],i=function(e){e=e;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return i/=4294967296,(i+=.5)*(t.random()>.5?1:-1)}},o=0;o<e;o+=4){var s=i(4294967296*(n||t.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,e)}}),s=r.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*o,c=t.min(4*u,i);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var f=r.splice(0,u);n.sigBytes-=c}return new a.init(f,c)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(i.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}}),r.algo={});return r}(Math),r)},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(15),i=n(2),o=n(1),a=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},u=1,c="logan_web_db",l="logan_detail_table",f="logReportName",p="logCreateTime",h="log_day_table",d="logDay",g=7*i.a,y=1*i.a,v=function(){function t(t){var e;this.DB=new r.CustomDB({dbName:t||c,dbVersion:u,tables:(e={},e[l]={indexList:[{indexName:f,unique:!1},{indexName:p,unique:!1}]},e[h]={primaryKey:d},e)})}return t.prototype.logReportNameFormatter=function(t,e){return t+"_"+e},t.prototype.logReportNameParser=function(t){var e=t.split("_");return{logDay:e[0],pageIndex:+e[1]}},t.prototype.getLogDayInfo=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.DB.getItem(h,t)];case 1:return[2,e.sent()]}}))}))},t.prototype.getLogDaysInfo=function(t,e){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return t!==e?[3,2]:[4,this.DB.getItem(h,t)];case 1:return[2,(n=r.sent())?[n]:[]];case 2:return[4,this.DB.getItemsInRange({tableName:h,indexRange:{indexName:d,lowerIndex:t,upperIndex:e,lowerExclusive:!1,upperExclusive:!1}})];case 3:return[2,r.sent()]}}))}))},t.prototype.getLogsByReportName=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.DB.getItemsInRange({tableName:l,indexRange:{indexName:f,onlyIndex:t}})];case 1:return[2,e.sent()]}}))}))},t.prototype.addLog=function(t){return a(this,void 0,void 0,(function(){var e,n,r,a,u,c,v,b,w,m,x,S,_,B,I;return s(this,(function(s){switch(s.label){case 0:return e=Object(i.g)(t),n=new Date,r=Object(i.c)(n),[4,this.getLogDayInfo(r)];case 1:if((a=s.sent()||((_={})[d]=r,_.totalSize=0,_.reportPagesInfo={pageSizes:[0]},_)).totalSize+e>g)throw new Error(o.b.EXCEED_LOG_SIZE_LIMIT);return a.reportPagesInfo||(a.reportPagesInfo={pageSizes:[0]}),u=a.reportPagesInfo.pageSizes,c=u.length-1,v=u[c],b=v>0&&v+e>y,D=u.slice(),b?D.push(e):D[c]+=e,w=D,(B={})[f]=this.logReportNameFormatter(r,b?c+1:c),B[p]=+n,B.logSize=e,B.logString=t,m=B,(I={})[d]=r,I.totalSize=a.totalSize+e,I.reportPagesInfo={pageSizes:w},x=I,S=6048e5-(+new Date-Object(i.e)(new Date)),[4,this.DB.addItems([{tableName:l,item:m,itemDuration:S},{tableName:h,item:x,itemDuration:S}])];case 2:return s.sent(),[2]}var D}))}))},t.idbIsSupported=r.idbIsSupported,t.deleteDB=r.deleteDB,t}();e.b=v},function(t,e,n){var r,i,o;t.exports=(o=n(11),i=(r=o).lib.WordArray,r.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return function(t,e,n){for(var r=[],o=0,a=0;a<e;a++)if(a%4){var s=n[t.charCodeAt(a-1)]<<a%4*2,u=n[t.charCodeAt(a)]>>>6-a%4*2;r[o>>>2]|=(s|u)<<24-o%4*8,o++}return i.create(r,o)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},o.enc.Base64)},,,,function(t,e,n){var r;t.exports=(r=n(11),r.enc.Utf8)}]]);